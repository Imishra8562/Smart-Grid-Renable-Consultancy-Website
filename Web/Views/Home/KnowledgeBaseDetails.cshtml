@model Web.Areas.Admin.Model.MasterModel
@using Newtonsoft.Json;
@{
    ViewBag.Title = "KnowledgeBaseDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section HeadContent {
    <!-- ================= BASIC SEO ================= -->
    <title>@Model.Knowledge_Base_Obj.Knowledge_Base_Page_Title</title>

    <meta name="keywords" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Meta_Keyword" />
    <meta name="description" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Meta_Description" />
    <meta name="author" content="Smart Grid Renewable Consultancy" />
    <meta name="robots" content="index, follow" />

    <meta name="news_keywords" content="@Model.Knowledge_Base_Obj.Knowledge_Base_News_Keyword" />
    <meta name="standout" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Meta_Description" />

    <!-- ================= CANONICAL ================= -->
    <link rel="canonical" href="https://smartgridrenewable.com/@Model.Knowledge_Base_Obj.Knowledge_Base_Url_Link" />

    <!-- ================= OPEN GRAPH ================= -->
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Smart Grid Renewable Consultancy" />

    <meta property="og:url" content="https://smartgridrenewable.com/@Model.Knowledge_Base_Obj.Knowledge_Base_Url_Link" />
    <meta property="og:title" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Title" />
    <meta property="og:description" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Description" />

    <meta property="og:image" content="https://smartgridrenewable.com/Content/assets/images/@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Image" />
    <meta property="og:image:url" content="https://smartgridrenewable.com/Content/assets/images/@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Image" />
    <meta property="og:image:secure_url" content="https://smartgridrenewable.com/Content/assets/images/@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Image" />

    <meta property="og:image:alt" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Image_Alt_Tag" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <meta property="og:see_also" content="https://smartgridrenewable.com/KnowledgeBase" />
    <meta property="og:see_also" content="https://smartgridrenewable.com/Contact" />

    <!-- ================= TWITTER ================= -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://smartgridrenewable.com/@Model.Knowledge_Base_Obj.Knowledge_Base_Url_Link" />

    <meta name="twitter:title" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Title" />
    <meta name="twitter:description" content="@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Description" />
    <meta name="twitter:image" content="https://smartgridrenewable.com/Content/assets/images/@Model.Knowledge_Base_Obj.Knowledge_Base_Og_Image" />

    <meta name="twitter:image:width" content="1200" />
    <meta name="twitter:image:height" content="630" />
}


<style>
  :root {
    --primary-color: #0d2c56; /* Deep Industrial Blue */
    --accent-color: #f5a623; /* Premium Amber Gold */
    --dark-blue: #071a33;
    --light-bg: #f4f7fa;
    --soft-shadow: 0 10px 25px rgba(0,0,0,0.08);
    --hover-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

/* -----------------------------------------------------
       HERO SECTION – Premium Gradient + Glass Overlay
    ----------------------------------------------------- */
.hero-section {
    position: relative;
    background-image: url('@Url.Content("~/Content/images/background/8.jpg")');
    background-size: cover;
    background-position: center;
    height: 420px;
    display: flex;
    align-items: center;
}

.hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(7, 26, 51, 0.93), rgba(13, 44, 86, 0.75));
    backdrop-filter: blur(3px);
}

.hero-section h1 {
    text-shadow: 0 3px 10px rgba(0,0,0,0.4);
}

/* -----------------------------------------------------
       TITLES – Premium Underline Animation
    ----------------------------------------------------- */
.section-title {
    display: inline-block;
    position: relative;
    font-weight: 800;
    letter-spacing: 0.4px;
    color: var(--primary-color);
}

    .section-title::after {
        content: "";
        position: absolute;
        width: 70px;
        height: 4px;
        background: var(--accent-color);
        bottom: -10px;
        left: 0;
        border-radius: 3px;
        transition: 0.4s ease;
    }

    .section-title:hover::after {
        width: 120px;
    }

/* -----------------------------------------------------
       FEATURE CARDS – Elevated + Soft Hover Rise
    ----------------------------------------------------- */
.feature-card {
    transition: 0.35s ease;
    background: #fff;
    border-radius: 12px;
    box-shadow: var(--soft-shadow);
    border: none;
}

    .feature-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--hover-shadow);
        border-bottom: 4px solid var(--accent-color);
    }

.icon-wrapper {
    width: 60px;
    height: 60px;
    background: rgba(13, 44, 86, 0.08);
    color: var(--primary-color);
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
    margin-bottom: 1rem;
    transition: 0.35s ease;
}

.feature-card:hover .icon-wrapper {
    background: var(--primary-color);
    color: #fff;
    transform: rotate(6deg) scale(1.05);
}

/* -----------------------------------------------------
       PROCESS STEPS – Premium Glass Cards
    ----------------------------------------------------- */
.card.position-relative {
    border-radius: 14px !important;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(6px);
    border: 1px solid rgba(255,255,255,0.6);
    transition: 0.35s ease;
    box-shadow: var(--soft-shadow);
}

    .card.position-relative:hover {
        transform: translateY(-6px);
        box-shadow: var(--hover-shadow);
    }

.step-number {
    font-size: 3.2rem;
    font-weight: 800;
    opacity: 0.06;
    position: absolute;
    top: 8px;
    right: 15px;
    color:black;
}

/* -----------------------------------------------------
       FAILURE CARDS – Premium Warning Look
    ----------------------------------------------------- */
.failure-card {
    border-left: 5px solid #d9534f;
    border-radius: 12px;
    background: #fff;
    box-shadow: var(--soft-shadow);
    transition: 0.3s ease;
}

    .failure-card:hover {
        transform: translateX(5px);
        box-shadow: var(--hover-shadow);
    }

/* -----------------------------------------------------
       RELATED SOLUTIONS – Sleek Hover Zoom
    ----------------------------------------------------- */
.related-img-top {
    height: 210px;
    object-fit: cover;
    border-radius: 12px 12px 0 0;
    transition: 0.5s ease;
}

.feature-card:hover .related-img-top {
    transform: scale(1.08);
    opacity: 0.95;
}

</style>

<section class="page-title" style="position:relative; background-image:url('@Url.Content("~/Content/images/background/8.jpg")'); background-size:cover; background-position:center;">

    <div class="auto-container">
        <div class="content text-white py-5" data-aos="fade-down">
            <h1 class="display-5 fw-bold">
                @Model.Knowledge_Base_Obj.Knowledge_Base_Name
            </h1>
            <ul class="page-breadcrumb list-inline mt-3">

                <li class="list-inline-item">
                    <a href="@Url.Action("Index","Home")" class="text-white text-decoration-none">Home</a>
                </li>
                <li class="list-inline-item text-white">Knowledge Base</li>
            </ul>
        </div>
    </div>
</section>
<section class="py-5 bg-light">
    <div class="container">
        <div class="row align-items-center g-5">

            <!-- ===== LEFT CONTENT ===== -->
            <div class="col-lg-7">
                <span class="badge bg-warning text-dark text-uppercase mb-3 px-3 py-2">
                    Core Competency
                </span>

                <h2 class="fw-bold text-dark mb-4" style="font-size: 2.3rem;">
                    @Model.Knowledge_Base_Obj.Knowledge_Base_Page_Title
                </h2>

                <div class="text-muted fs-6 lh-lg">
                    @Html.Raw(Model.Knowledge_Base_Obj.Knowledge_Base_Description)
                </div>
            </div>

            <!-- ===== RIGHT IMAGE ===== -->
            <div class="col-lg-5">
                <div class="position-relative text-center">

                    <!-- Decorative Shape -->
                    <div class="position-absolute top-0 end-0 translate-middle
                    bg-warning opacity-25 rounded-circle"
                         style="width:100px; height:100px; z-index:0;">
                    </div>

                    <div class="p-3 bg-white rounded-4 shadow position-relative" style="z-index:1;">
                        <img src="@Url.Content(Model.Knowledge_Base_Obj.Knowledge_Base_Image)"
                             alt="@Model.Knowledge_Base_Obj.Knowledge_Base_Image_Alt_Tag"
                             class="img-fluid rounded-4"
                             style="max-height:420px; object-fit:cover;">
                    </div>

                </div>
            </div>


        </div>
    </div>
</section>


<section class="py-5 bg-light">

    @if (Model.List_Knowledge_Card_Business_Obj != null && Model.List_Knowledge_Card_Business_Obj.Count > 0)
    {
        <div class="container">
            <h3 class="section-title">Motor Technical Specifications</h3>

            <div class="row g-4">
                @foreach (var item in Model.List_Knowledge_Card_Business_Obj)
                {
                    <div class="col-md-4">
                        <div class="card feature-card h-100 p-4 border-0 shadow-sm">
                            <div class="icon-wrapper">
                                <i class="fa fa-bolt"></i>
                            </div>

                            <h5 class="fw-bold">
                                @item.Knowledge_Card_Title
                            </h5>

                            <p class="text-muted mb-0">
                                @Html.Raw(item.Knowledge_Card_Description)
                            </p>
                        </div>
                    </div>
                }
            </div>
        </div>
    }

</section>

<section class="py-5">
    @if (Model.List_Knowledge_WorkflowStep_Business_Obj != null && Model.List_Knowledge_WorkflowStep_Business_Obj.Count > 0)
    {
        <div class="container">
            <h3 class="section-title">Testing & Commissioning Workflow</h3>
            <p class="text-muted mb-5">Our systematic approach ensures asset integrity from installation to operation.</p>

            <div class="row g-4">
                @{
                    int steNo = 1;
                }
                @foreach (var item in Model.List_Knowledge_WorkflowStep_Business_Obj)
                {
                    <div class="col-lg-3 col-md-6">
                        <div class="card h-100 border-0 shadow-sm bg-white position-relative overflow-hidden">
                            <div class="card-body p-4">
                                <span class="step-number">@steNo.ToString("D2")</span>
                                <h6 class="text-uppercase text-warning fw-bold mb-3">@item.Knowledge_WorkflowStep_Title</h6>
                                <h5 class="fw-bold mb-3">@item.Knowledge_WorkflowStep_Name</h5>
                                <ul class="small text-muted ps-3 mb-0">

                                    @Html.Raw(item.Knowledge_WorkflowStep_Description)
                                </ul>
                            </div>
                        </div>
                    </div>
                    steNo++;
                }
            </div>
        </div>
    }
</section>

<section class="py-5 bg-light">
    @if (Model.List_Knowledge_FailureMode_Business_Obj != null && Model.List_Knowledge_FailureMode_Business_Obj.Count > 0)
    {
        <div class="container">
            <h3 class="section-title">Common Failure Modes</h3>
            <div class="row g-4">
                @foreach (var item in Model.List_Knowledge_FailureMode_Business_Obj)
                {
                    <div class="col-md-6 col-lg-4">
                        <div class="card failure-card h-100 shadow-sm border-0">
                            <div class="card-body">
                                <h5 class="fw-bold text-danger">@item.Knowledge_FailureMode_Title</h5>
                                <p class="small text-muted mb-0">@Html.Raw(item.Knowledge_FailureMode_Description)</p>
                            </div>
                        </div>
                    </div>
                }

            </div>
        </div>
    }
</section>

<section class="py-5 bg-white">
    @if (Model.List_Knowledge_RelatedSolution_Business_Obj != null && Model.List_Knowledge_RelatedSolution_Business_Obj.Count > 0)
    {
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Related Industrial Solutions</h2>
                <p class="text-muted">Explore our other specialized engineering services.</p>
            </div>

            <div class="row g-4">
                @foreach (var item in Model.List_Knowledge_RelatedSolution_Business_Obj)
                {
                    <div class="col-lg-4">
                        <div class="card h-100 border-0 shadow-sm feature-card">
                            <img src="@Url.Content(item.Knowledge_RelatedSolution_Image)" class="card-img-top related-img-top" alt="@item.Knowledge_RelatedSolution_Image_Alt_Tag">
                            <div class="card-body">
                                <h4 class="fw-bold">@item.Knowledge_RelatedSolution_Name</h4>
                                <p class="text-muted small">
                                    @Html.Raw(item.Knowledge_RelatedSolution_Description)
                                </p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</section>

<script type="application/ld+json">
@{
    var kbItem = Model.Knowledge_Base_Obj;
    if (kbItem != null)
    {
        // Remove HTML tags from description
        string descriptionText = string.IsNullOrEmpty(kbItem.Knowledge_Base_Description)? "": System.Text.RegularExpressions.Regex.Replace(kbItem.Knowledge_Base_Description, "<.*?>", "").Trim();

        // Absolute image URL
        string imageUrl = !string.IsNullOrEmpty(kbItem.Knowledge_Base_Image)? Url.Content(kbItem.Knowledge_Base_Image): Url.Content("/Content/images/default-og.png");

        // Absolute URL for the KnowledgeBaseDetails page
        string kbUrl = Url.Action("KnowledgeBaseDetails", "Home", new { url = kbItem.Knowledge_Base_Url_Link }, Request.Url.Scheme);

        var schema = new Dictionary<string, object>
        {
            { "@context", "https://schema.org" },
            { "@type", "Article" },
            { "headline", kbItem.Knowledge_Base_Name ?? "Knowledge Base Article" },
            { "url", kbUrl },
            { "description", descriptionText },
            { "image", imageUrl },
            { "datePublished", kbItem.Created_On },
            { "dateModified", kbItem.Modified_On },
            { "author", new Dictionary<string, object>
                {
                    { "@type", "Organization" },
                    { "name", "Smart Grid Renewable Consultancy" }
                }
            }
        };

        @Html.Raw(JsonConvert.SerializeObject(schema, Formatting.Indented))
    }
}
</script>

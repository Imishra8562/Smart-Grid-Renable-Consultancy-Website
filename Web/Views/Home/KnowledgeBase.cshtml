@model Web.Areas.Admin.Model.MasterModel
@using Newtonsoft.Json;
@{
    ViewBag.Title = "KnowledgeBase";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section HeadContent {
    <title>@ViewBag.Title - Smart Grid Renewable Consultancy</title>
    <meta name="description" content="Explore technical knowledge, engineering guides, testing procedures, and industrial best practices from Smart Grid Renewable Consultancy." />
    <link rel="canonical" href="https://smartgridrenewable.com/KnowledgeBase" />
}

<!-- ====== Page Title Section ====== -->
<section class="page-title" style="position:relative; background-image:url('@Url.Content("~/Content/images/background/8.jpg")'); background-size:cover; background-position:center;">
    <div class="auto-container">
        <div class="content text-white py-5" data-aos="fade-down">
            <h1 class="display-5 fw-bold">Knowledge <span class="text-warning">Base</span></h1>
            <ul class="page-breadcrumb list-inline mt-3" itemscope itemtype="https://schema.org/BreadcrumbList">
                <li class="list-inline-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a href="@Url.Action("Index","Home")" class="text-white text-decoration-none" itemprop="item">
                        <span itemprop="name">Home</span>
                    </a>
                    <meta itemprop="position" content="1" />
                </li>
                <li class="list-inline-item text-white" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <span itemprop="name">Knowledge Base</span>
                    <meta itemprop="position" content="2" />
                </li>
            </ul>
        </div>
    </div>
</section>
<section class="py-5 bg-light">
    <div class="container">

        <!-- Page Header -->
        <div class="text-center mb-5">
            <h2 class="fw-bold text-dark">Knowledge Base</h2>
            <div class="category-underline"></div>
            <p class="text-muted mx-auto" style="max-width:800px;">
                Explore our insights, guides, and expertise across industries and technologies.
            </p>
        </div>

        <div class="row g-4">
            @if (Model.List_Knowledge_Base_Business_Obj != null &&
                 Model.List_Knowledge_Base_Business_Obj.Count > 0)
            {
                foreach (var item in Model.List_Knowledge_Base_Business_Obj)
                {
                    <div class="col-md-6 col-lg-4" data-aos="fade-up">
                        <div class="card kb-card h-100 border-0 shadow-sm">

                            <!-- Image -->
                            <div class="position-relative overflow-hidden">
                                <img src="@Url.Content(item.Knowledge_Base_Image)"
                                     class="card-img-top kb-img"
                                     alt="@item.Knowledge_Base_Image_Alt_Tag"
                                     loading="lazy" />
                                <div class="kb-overlay"></div>
                            </div>

                            <!-- Content -->
                            <div class="card-body d-flex flex-column">
                                <h5 class="fw-semibold text-dark mb-2">
                                    @item.Knowledge_Base_Name
                                </h5>

                                <p class="text-muted small flex-grow-1 kb-desc">
                                    @Html.Raw(item.Knowledge_Base_Page_Title)
                                </p>

                                <a href="@Url.Action("KnowledgeBaseDetails", "Home",
                                    new { url = item.Knowledge_Base_Url_Link })"
                                   class="btn btn-outline-danger btn-sm align-self-start mt-3"
                                   title="Read more about @item.Knowledge_Base_Name">
                                    Learn More →
                                </a>
                            </div>

                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12 text-center text-muted">
                    No knowledge base articles found.
                </div>
            }
        </div>

    </div>
</section>

<!-- Knowledge Base Categories -->


<style>
    .category-underline {
        width: 80px;
        height: 3px;
        background-color: #dc3545;
        margin: 1rem auto;
    }

    .kb-card:hover {
        transform: translateY(-5px);
        transition: transform 0.3s ease;
    }
</style>

<script type="application/ld+json">
@{
    // Safely get the list or an empty list
    var kbItems = Model.List_Knowledge_Base_Business_Obj;
    var itemList = new List<object>();
    int position = 1;

    foreach (var item in kbItems)
    {
        itemList.Add(new Dictionary<string, object>
        {
            { "@type", "ListItem" },
            { "position", position++ },
            { "name", item.Knowledge_Base_Name },
            { "url",Url.Action("KnowledgeBaseDetails","Home",new { url = item.Knowledge_Base_Url_Link },Request.Url.Scheme)}
        });
    }

    var schema = new Dictionary<string, object>
    {
        { "@context", "https://schema.org" },
        { "@type", "ItemList" },
        { "name", "Knowledge Base" },
        { "url",Url.Action("KnowledgeBase", "Home", null, Request.Url.Scheme)},
        { "numberOfItems", itemList.Count },
        { "itemListElement", itemList }
    };
}
@Html.Raw(JsonConvert.SerializeObject(schema, Formatting.Indented))
</script>

